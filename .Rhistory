schedule_d_2017 <- subset(schedule_d, fiscal_year == "2017") %>%
select("administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2018 <- subset(schedule_d, fiscal_year == "2018") %>%
select("administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2019 <- subset(schedule_d, fiscal_year == "2019") %>%
select("administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2020 <- subset(schedule_d, fiscal_year == "2020") %>%
select("administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2021 <- subset(schedule_d, fiscal_year == "2021") %>%
select("administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2022 <- subset(schedule_d, fiscal_year == "2022") %>%
select("administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
View(schedule_d_2018)
View(schedule_d_2020)
# Cleaning variable names
schedule_d <- rename_cols(schedule_d,
c("x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_administrative_expenses_amt",                            "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_beginning_year_balance_amt", "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_contributions_amt",        "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_end_year_balance_amt",     "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_grants_or_scholarships_amt",
"x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_investment_earnings_or_losses_amt",                              "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_other_expenditures_amt"),
c("administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure"))
# Converting data from wide to long and selecting Part V columns from 990s
schedule_d_2017 <- subset(schedule_d, fiscal_year == "2017") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2018 <- subset(schedule_d, fiscal_year == "2018") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2019 <- subset(schedule_d, fiscal_year == "2019") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2020 <- subset(schedule_d, fiscal_year == "2020") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2021 <- subset(schedule_d, fiscal_year == "2021") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2022 <- subset(schedule_d, fiscal_year == "2022") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
View(schedule_d)
View(schedule_d)
# Load packages
library(dplyr) # data manipulation
library(readr) # scrapes web pages
library(ggplot2) # data visualization
library(janitor) # data manipulation
# Load data
setwd("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation")
schedule_d <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/schedule_d_vals.csv")
# Cleaning column names
schedule_d <- schedule_d %>%
clean_names()
# Renaming Section D, Part V: Endowment Fund Group Variables
# sort(colnames(schedule_d))
rename_cols <- function(data, old_names, new_names) {
# data
# old_names: vector of old var names
# new_names: a vector of new var names
for (i in seq_along(old_names)) {
names(data)[names(data) == old_names[i]] <- new_names[i]}
return(data)}
# Cleaning variable names
schedule_d <- rename_cols(schedule_d,
c("x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_administrative_expenses_amt",                            "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_beginning_year_balance_amt", "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_contributions_amt",        "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_end_year_balance_amt",     "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_grants_or_scholarships_amt",
"x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_investment_earnings_or_losses_amt",                              "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_other_expenditures_amt"),
c("administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure"))
# Converting data from wide to long and selecting Part V columns from 990s
schedule_d_2017 <- subset(schedule_d, fiscal_year == "2017") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2018 <- subset(schedule_d, fiscal_year == "2018") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2019 <- subset(schedule_d, fiscal_year == "2019") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2020 <- subset(schedule_d, fiscal_year == "2020") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2021 <- subset(schedule_d, fiscal_year == "2021") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2022 <- subset(schedule_d, fiscal_year == "2022") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
investments17 <-
ggplot (data=schedule_d_2017, aes(x= investment_earnings_or_losses)) +
geom_histogram () +
labs(title = "Distribution of 2017 Investment Earnings and Losses",
subtitle = "Assessing Central Tendency and Data Spread",
x = "Amount (USD)",
y = "Count") +
scale_y_continuous(labels = function(x) format(x, scientific = FALSE))
investments17
investments17 <-
ggplot (data=schedule_d_2017, aes(x= investment_earnings_or_losses)) +
geom_histogram () +
labs(title = "Distribution of 2017 Investment Earnings and Losses",
subtitle = "Assessing Central Tendency and Data Spread",
x = "Amount (USD)",
y = "Count") +
scale_x_continuous(labels = function(x) format(x, scientific = FALSE))
investments17
investments17_summary <- schedule_d_2017 |>
group_by(ein) |>
summarize(
group_n = n(),
mean = mean(investment_earnings_or_losses),
median = median(investment_earnings_or_losses),
max = max(investment_earnings_or_losses),
min = min(investment_earnings_or_losses),
sd = sd(investment_earnings_or_losses))
investments17_summary
# Set default behavior for all code chunks here:
knitr::opts_chunk$set(
echo = TRUE,
message = FALSE,
warning = FALSE,
fig.width = 16/2,
fig.height = 9/2)
# Load packages
library(dplyr) # data manipulation
library(readr) # scrapes web pages
library(ggplot2) # data visualization
library(janitor) # data manipulation
# Load data
setwd("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation")
schedule_d <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/schedule_d_vals.csv")
# Cleaning column names
schedule_d <- schedule_d %>%
clean_names()
# Renaming Section D, Part V: Endowment Fund Group Variables
# sort(colnames(schedule_d))
rename_cols <- function(data, old_names, new_names) {
# data
# old_names: vector of old var names
# new_names: a vector of new var names
for (i in seq_along(old_names)) {
names(data)[names(data) == old_names[i]] <- new_names[i]}
return(data)}
# Cleaning variable names
schedule_d <- rename_cols(schedule_d,
c("x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_administrative_expenses_amt",                            "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_beginning_year_balance_amt", "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_contributions_amt",        "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_end_year_balance_amt",     "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_grants_or_scholarships_amt",
"x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_investment_earnings_or_losses_amt",                              "x_return_return_data_irs990schedule_d_cy_minus3yr_endwmt_fund_grp_other_expenditures_amt"),
c("administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure"))
# Converting data from wide to long and selecting Part V columns from 990s
schedule_d_2017 <- subset(schedule_d, fiscal_year == "2017") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2018 <- subset(schedule_d, fiscal_year == "2018") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2019 <- subset(schedule_d, fiscal_year == "2019") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2020 <- subset(schedule_d, fiscal_year == "2020") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2021 <- subset(schedule_d, fiscal_year == "2021") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
schedule_d_2022 <- subset(schedule_d, fiscal_year == "2022") %>%
select("ein",
"administrative_expenses",
"boy_balance",
"contributions",
"eoy_balance",
"grants_or_scholarships",
"investment_earnings_or_losses",
"other_expenditure")
investments17 <-
ggplot (data=schedule_d_2017, aes(x= investment_earnings_or_losses)) +
geom_histogram () +
labs(title = "Distribution of 2017 Investment Earnings and Losses",
subtitle = "Assessing Central Tendency and Data Spread",
x = "Amount (USD)",
y = "Count") +
scale_x_continuous(labels = function(x) format(x, scientific = FALSE))
investments17
investments17_summary <- schedule_d_2017 |>
group_by(ein) |>
summarize(
group_n = n(),
mean = mean(investment_earnings_or_losses),
median = median(investment_earnings_or_losses),
max = max(investment_earnings_or_losses),
min = min(investment_earnings_or_losses),
sd = sd(investment_earnings_or_losses))
investments17_summary
investments17_summary <- schedule_d_2017 |>
group_by(ein) |>
summarize(
group_n = n(),
mean = mean(investment_earnings_or_losses),
median = median(investment_earnings_or_losses),
max = max(investment_earnings_or_losses),
min = min(investment_earnings_or_losses),
sd = sd(investment_earnings_or_losses))
investments17 <-
ggplot (data=schedule_d_2017, aes(x= investment_earnings_or_losses)) +
geom_histogram () +
labs(title = "Distribution of 2017 Investment Earnings and Losses",
subtitle = "Assessing Central Tendency and Data Spread",
x = "Amount (USD)",
y = "Count") +
scale_x_continuous(labels = function(x) format(x, scientific = FALSE))
# Chunk 1
# Set default behavior for all code chunks here:
knitr::opts_chunk$set(
echo = TRUE,
message = FALSE,
warning = FALSE,
fig.width = 16/2,
fig.height = 9/2)
# Load packages
library(dplyr) # data manipulation
library(readr) # scrapes web pages
library(ggplot2) # data visualization
library(janitor) # data manipulation
# Load data
setwd("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation")
schedule_d <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/schedule_d_vals.csv")
company_names <- read_csv(here("data", "companies.csv")) %>%
mutate(EIN = as.character(EIN), organization_name = as.character(Company)) %>%
select(EIN, organization_name)
# Load packages
library(dplyr) # data manipulation
library(readr) # scrapes web pages
library(ggplot2) # data visualization
library(janitor) # data manipulation
# Load data
setwd("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation")
schedule_d <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/schedule_d_vals.csv")
company_names <- read_csv(here("schedule_d", "companies.csv")) %>%
mutate(EIN = as.character(EIN), organization_name = as.character(Company)) %>%
select(EIN, organization_name)
# Load packages
library(dplyr) # data manipulation
library(readr) # scrapes web pages
library(ggplot2) # data visualization
library(janitor) # data manipulation
# Load data
setwd("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation")
schedule_d <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/schedule_d_vals.csv")
companies <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/companies.csv")
#
# company_names <- read_csv(here("data", "companies.csv")) %>%
#   mutate(EIN = as.character(EIN), organization_name = as.character(Company)) %>%
#   select(EIN, organization_name)
#
# total_expense_data <- total_expense_data %>%
#   left_join(company_names, by = 'EIN')
company_names <- read_csv(here("schedule_d", "companies.csv"))
View(companies)
View(schedule_d)
companies <- companies %>%
mutate(EIN = as.character(EIN), organization_name = as.character(Company)) %>%
select(EIN, organization_name)
companies <- companies %>%
mutate(ein = as.character(EIN), organization_name = as.character(Company)) %>%
select(EIN, organization_name)
companies
companies <- companies %>%
mutate(ein = as.character(EIN), organization_name = as.character(Company)) %>%
select(ein, organization_name)
companies <- companies %>%
mutate(ein = as.character(ein), organization_name = as.character(organization_name)) %>%
select(ein, organization_name)
schedule_d <- schedule_d %>%
left_join(company_names, by = 'ein')
## Load packages
library(dplyr) # data manipulation
library(readr) # scrapes web pages
library(ggplot2) # data visualization
library(janitor) # data manipulation
## Set directort
setwd("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation")
## Load data
schedule_d <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/schedule_d_vals.csv")
companies <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/companies.csv")
## Joining datasets
companies <- companies %>%
mutate(ein = as.character(ein), organization_name = as.character(organization_name)) %>%
select(ein, organization_name)
schedule_d <- schedule_d %>%
left_join(organization_name, by = 'ein')
# Chunk 1
## Set default behavior for all code chunks here:
knitr::opts_chunk$set(
echo = TRUE,
message = FALSE,
warning = FALSE,
fig.width = 16/2,
fig.height = 9/2)
## Load packages
library(dplyr) # data manipulation
library(readr) # scrapes web pages
library(ggplot2) # data visualization
library(janitor) # data manipulation
## Set directort
setwd("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation")
## Load data
schedule_d <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/schedule_d_vals.csv")
companies <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/companies.csv")
## Joining datasets
companies <- companies %>%
mutate(ein = as.character(ein), organization_name = as.character(organization_name)) %>%
select(ein, organization_name)
schedule_d <- schedule_d %>%
left_join(organization_name , by = 'ein')
## Load packages
library(dplyr) # data manipulation
library(readr) # scrapes web pages
library(ggplot2) # data visualization
library(janitor) # data manipulation
## Set directort
setwd("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation")
## Load data
schedule_d <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/schedule_d_vals.csv")
companies <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/companies.csv")
## Joining datasets
companies <- companies %>%
mutate(ein = as.character(ein), organization_name = as.character(organization_name)) %>%
select(ein, organization_name)
schedule_d <- schedule_d %>%
left_join(organization_name , by = 'ein')
## Load packages
library(dplyr) # data manipulation
library(readr) # scrapes web pages
library(ggplot2) # data visualization
library(janitor) # data manipulation
## Set directort
setwd("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation")
## Load data
schedule_d <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/schedule_d_vals.csv")
companies <- read.csv("/Users/michelruiz-fuentes/Desktop/smith-capstone-24/990s_assetallocation/companies.csv")
## Cleaning column names
schedule_d <- schedule_d %>%
clean_names()
## Renaming Section D, Part V: Endowment Fund Group Variables
# sort(colnames(schedule_d))
rename_cols <- function(data, old_names, new_names) {
# data
# old_names: vector of old var names
# new_names: a vector of new var names
for (i in seq_along(old_names)) {
names(data)[names(data) == old_names[i]] <- new_names[i]}
return(data)}
## Joining datasets
companies <- companies %>%
mutate(ein = as.character(ein), organization_name = as.character(organization_name)) %>%
select(ein, organization_name)
schedule_d <- schedule_d %>%
left_join(organization_name , by = 'ein')
View(schedule_d)
View(schedule_d_2017)
View(companies)
